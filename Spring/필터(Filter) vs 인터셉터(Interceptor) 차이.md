# 필터(Filter)란?

- J2EE 표준 스펙 기능으로 디스패처 서블릿(Dispatcher Servlet)에 요청이 전달되기 전/후에 url 패턴에 맞는 모든 요청에 대해 부가작업을 처리할 수 있는 기능
- 스프링 컨테이너가 아닌 톰캣과 같은 웹 컨테이너에 의해 관리가 되는 것이고(스프링 빈으로 등록은 된다.), 디스패치 서블릿 전/후에 처리하는 것이다.

#### 필터의 메소드

- 필터를 추가하기 위해서는 javax.servlet의 Filter 인터페이스를 구현(implements)해야 하며 3가지 메소드를 가지고 있다.

1. init 메소드
2. doFilter 메소드
3. destroy 메소드

# 인터셉터(Interceptor)란?

- Spring이 제공하는 기술로써, 디스패처 서블릿이 컨트롤러를 호출하기 전과 후에 요청과 응답을 참조하거나 가공할 수 있는 기능을 제공한다.
- 스프링 컨텍스트에서 동작한다.

#### 인터셉터의 메소드

- 인터셉터를 추가하기 위해서는 org.springframework.web.servlet의 HandlerInterceptor 인터페이스를 구현(implements)해야 하며 3가지 메소드를 가지고 있다.

1. preHandle 메소드
2. postHandle 메소드
3. afterCompletion 메소드

### 필터(Filter) vs 인터셉터(Interceptor) 차이

- 필터와 인터셉터는 각각이 관리되는 컨테이너와 Request/Response의 조작가능 여부가 다르고, 그에 따라 용도가 다르다.

*Request/Response의 조작가능 여부*

- 필터는 Request와 Response를 조작할 수 있지만 인터셉터는 조작할 수 없다.(내부 상태를 변경한다는 것이 아니라 다른 객체로 바꿔친다는 의미)
- 필터가 다음 필터를 호출하기 위해서는 필터 체이닝(다음 필터 호출)을 해주어야 한다. 이때 Request/Response 객체를 넘겨주므로 원하는 Request/Response 객체를 넣어줄 수 있다.(null로도 넣어줄 수 있다.)
- 인터셉터는 디스패처 서블릿이 여러 인터셉터 목록을 가지고 있고, for문으로 순차적으로 실행시킨다. (true, false 반환 -> 다른 Request/Response 객체를 넘겨줄 수 없음)

### 필터와 인터셉터의 용도 및 예시

*필터의 용도*

1. 공통된 보안 및 인증/인가 관련 작업
2. 모든 요청에 대한 로깅 또는 감사
3. 이미지/데이터 압축 및 문자열 인코딩
4. Spring과 분리되어야 하는 기술

- 스프링과 무관하게 전역적으로 처리해야 하는 작접들 처리(보안)
- 웹 어플리케이션에 전반적으로 사용되는 기능을 구현하기에 적합

*인터셉터의 용도*

1. 세부적인 보안 및 인증/인가 공통 작업
2. API 호출에 대한 로깅 또는 감사
3. Controller로 넘겨주는 정보(데이터) 가공

- 클라이언트의 요청과 관련되어 전역적으로 처리해야 하는 작업들 처리
- HttpServletRequest나 HttpServletResponse 등과 같은 객체를 제공받으므로 객체 자체를 조작할수는 없다. 대신 해당 객체가 내부적으로 갖는 값은 조작할 수 있으므로 **컨트롤러로 넘겨주기 위한 정보를 가공하기에 용이**
