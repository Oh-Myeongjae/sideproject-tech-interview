# [database]redis에 대해 설명해주세요.

**redis란?**

데이터베이스, 캐시, 스트리밍, 엔진 및 메시지 브로커로 사용하는 오픈소스 인메모리 데이터 저장소

**redis 특징**

- **key, value 구조의 NoSQL → 쿼리 필요없음**
- **데이터를 디스크가 아닌 메모리에서 처리 → 속도 빠름**
- **String, Lists, Sets, Sorted Sets, Hashes 자료 구조 지원**
    - String → key-value
    - Sets → String 집합
    - Sorted Sets → 중복 데이터를 담지 않은 set 구조 + Sort 적용 → 랭킹 보드 서버 등 구현
    - Lists → Array 형식 → 처음과 끝에 데이터 넣고 빼는 건 쉽지만 중간에 데이터를 삽입하거나 삭제하는 것이 어려움
- **single Threaded** → 한번에 하나의 명령어만 처리 / 전 명령어 처리가 길어지면 뒤의  명령어들의 대기시간도 길어짐.(set, get 명령어는 초당 10만개 이상 처리할 정도로 빠름)

**장점**

- 속도, 다양한 자료 구조 등에서 이점이 있음

**단점(사용시 주의점)**

- 서버 장애 시 데이터 유실에 대비하여 서버를 2개 운영하거나 다른 조치를 취하는 등 운영적인 부분에서 신경써야함 / 메모리 관리 중요
- 싱글 스레드이기 때문에 너무 오래 걸리는 요청이나 명령은 피해야함.

**데이터 유실에 대한 다른 해결 방안은? → redis Persistence**

인메모리 방식의 단점인 데이터 유실에 대한 다른 보안 방법으로 데이터를 디스크에 저장하는 방식

- **AOF (Append On File) 방식**
    - 파일에 추가하는 방식으로 입력, 수정, 삭제 마다 LOG 파일에 데이터가 저장되고 서버 재시작할 때마다 데이터를 실행하고 복구할 수 있습니다.
    - **장점**
        - 매번 파일에 추가하는 방식으로 실시간 데이터 저장
        - 실행 기록 그대로 저장하기 때문에 저장 속도가 빠름
        - redis 운영 시 실수로 모든 데이터를 날려도 AOF파일에 기록된 명령을 수정하여 복원할 수 있음.
    - **단점**
        - 입력, 수정, 삭제의 명령 마다 저장되기 때문에 점차 로그파일 크기 증가
        - 로그파일의 크기가 클 경우 데이터 복구 시간도 증가
- **RDB 방식**
    - 운영 중인 데이터를 압축된 크기로 저장하는 방식
    - **장점**
        - 파일 압축으로 인해 데이터 크기 감소
        - 작고 단일의 파일이기에 데이터 복구 속도 빠름
    - **단점**
        - 전체 데이터를 시스템 관리자가 정해진 시간에 백업해야하므로 실시간 데이터 백업은 어려움.
        - redis 운영중인 전체 데이터를 백업하므로 시간 소요 큼
        - 데이터 백업 과정 중 서버 다운되면 데이터 전체가 사라짐

**다른 방법은?**

RDB로는 주기적으로 백업을 하며 RDB 백업 기준으로 AOF 로그를 초기화하여 시간절약과 실시간 데이터를 유지하는 방법도 많이 사용됩니다.
