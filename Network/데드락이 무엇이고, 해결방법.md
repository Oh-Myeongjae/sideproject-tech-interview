# 데드락(Deadlock, 교착 상태)이란?

### 데드락(Deadlock)

운영체제에서 데드락(교착상태)이란, 시스템 자원에 대한 요구가 뒤엉킨 상태이다.
- 둘 이상의 프로세스가 다른 프로세스가 점유하고 있는 자원을 서로 기다릴 때 무한 대기에 빠지는 상황

#### 데드락(Deadlock)의 발생조건

1. 상호 배제
    - 한 번에 프로세스 하나만 해당 자원을 사용할 수 있다. 사용 중인 자원을 다른 프로세스가 사용하려면 요청한 자원이 해제될 때까지 기다려야 한다.
2. 점유 대기
    - 자원을 최소한 하나 보유하고, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재해야 한다.
3. 비선점
    - 이미 할당된 자원을 강제로 빼앗을 수 없다(비선점).
4. 순환 대기
    - 대기 프로세스의 집합이 순환 형태로 자원을 대기하고 있어야 한다.

#### 데드락(Deadlock)의 해결법

1. 데드락이 발생하지 않도록 예방(prevention) 하기
    - 교착 상태 발생 조건 중 하나를 제거하면서 해결한다 (자원 낭비 엄청 심함)
    - 상호배제 부정 : 여러 프로세스가 공유 자원 사용
    - 점유대기 부정 : 프로세스 실행전 모든 자원을 할당
    - 비선점 부정 : 자원 점유 중인 프로세스가 다른 자원을 요구할 때 가진 자원 반납
    - 순환대기 부정 : 자원에 고유번호 할당 후 순서대로 자원 요구
2. 데드락 발생 가능성을 인정하면서도 적절하게 회피(avoidance) 하기
    - 교착 상태 발생 시 피해나가는 방법 
    - 은행원 알고리즘(Banker's Algorithm)
    - 은행에서 모든 고객의 요구가 충족되도록 현금을 할당하는데서 유래함 
    - 프로세스가 자원을 요구할 때, 시스템은 자원을 할당한 후에도 안정 상태로 남아있게 되는지 사전에 검사하여 교착 상태 회피 
    - 안정 상태면 자원 할당, 아니면 다른 프로세스들이 자원 해지까지 대기
3. 데드락 발생을 허용하지만 데드락을 탐지(detection)하여, 데드락에서 회복하기
   1. 탐지(Detection)
       - 자원 할당 그래프를 통해 교착 상태를 탐지함 
       - 자원 요청 시, 탐지 알고리즘을 실행시켜 그에 대한 오버헤드 발생함 
   2. 회복(Recovery)
       - 교착 상태 일으킨 프로세스를 종료하거나, 할당된 자원을 해제시켜 회복시키는 방법



